version: "3.9"

services:
  hotelai-app:
    build: .
    container_name: bookai
    tty: true
    stdin_open: true
    environment:
      OPENAI_API_KEY: ${OPENAI_API_KEY}
      OPENAI_MODEL: ${OPENAI_MODEL}
      LANGCHAIN_API_KEY: ${LANGCHAIN_API_KEY}
      LANGCHAIN_ENDPOINT: ${LANGCHAIN_ENDPOINT}
      LANGCHAIN_PROJECT: ${LANGCHAIN_PROJECT}
      LANGCHAIN_TRACING_V2: ${LANGCHAIN_TRACING_V2}
      SUPABASE_URL: ${SUPABASE_URL}
      SUPABASE_KEY: ${SUPABASE_KEY}
      TELEGRAM_BOT_TOKEN: ${TELEGRAM_BOT_TOKEN}
      TELEGRAM_ENCARGADO_CHAT_ID_EVA: ${TELEGRAM_ENCARGADO_CHAT_ID_EVA}
      TELEGRAM_ENCARGADO_CHAT_ID_MARCOS: ${TELEGRAM_ENCARGADO_CHAT_ID_MARCOS}
      TELEGRAM_ENCARGADO_CHAT_ID_RAFA: ${TELEGRAM_ENCARGADO_CHAT_ID_RAFA}
      WHATSAPP_PHONE_ID: ${WHATSAPP_PHONE_ID}
      WHATSAPP_TOKEN: ${WHATSAPP_TOKEN}
      WHATSAPP_VERIFY_TOKEN: ${WHATSAPP_VERIFY_TOKEN}
      ENDPOINT_MCP: ${ENDPOINT_MCP}
    volumes:
      - .:/app
    ports:
      - "8000:8000"
    command: >
      uvicorn main:app --host 0.0.0.0 --port 8000 --reload
    restart: always
